<div v-if="global.activeField.name" :class="['tx_mask_field', editMode ? 'edit_field' : 'new_field']">
    <f:comment><!-- field header 3rd column: own/mask fields (eg. tx_mask_text) --></f:comment>
    <div class="tx_mask_fieldheader">
        <div :class="['tx_mask_fieldheader_icon', 'id_' + global.activeField.name]">
            <div class="tx_mask_fieldheader__icon" v-html="global.activeField.icon"></div>
        </div>
        <div class="tx_mask_fieldheader__text" :title="global.activeField.label">
            <h1 v-if="global.activeField.name == 'linebreak'">Linebreak</h1>
            <h1 v-else>{{ global.activeField.label }}</h1>
            <p v-if="global.activeField.name != 'linebreak'">{{ global.activeField.key }}</p>
        </div>
    </div>
    <div role="tabpanel" :class="{'hidden': global.activeField.name == 'linebreak'}">
        <ul class="nav nav-tabs t3js-tabs" role="tablist" id="tabs-{key}" data-store-last-tab="1">
            <li role="presentation" class="t3js-tabmenu-item">
                <a role="tab" data-toggle="tab" aria-expanded="true">
                    <f:translate key="tx_mask.tabs.default"/>
                </a>
            </li>
            <f:comment><!-- todo render tabheader here --></f:comment>
        </ul>
        <div class="tx_mask_fieldcontent tab-content">
            <div role="tabpanel" class="tab-pane active" id="default_{key}">
                <f:comment><!-- only when create field (not edit), used in content and pages --></f:comment>
                <f:comment><!-- mask or TYPO3 field chooser --></f:comment>
                <div v-if="!editMode && (global.activeField.key === '' || isExistingField)" class="row">
                    <div class="form-group col-sm-6">
                        <label class="t3js-formengine-label" for="form_choosefield">
                            <f:translate key="tx_mask.field.choosefield"/>
                        </label>
                        <div class="t3js-formengine-field-item">
                            <div class="form-control-wrap">
                                <select id="form_choosefield" v-model="global.activeField.key" class="form-control tx_mask_fieldcontent_type">
                                    <optgroup class="c-divider" label="New">
                                        <option value="">
                                            <f:translate key="tx_mask.field.newfield"/>
                                        </option>
                                    </optgroup>
                                    <optgroup v-if="availableTca[global.activeField.name].core.length" class="c-divider" label="Core fields">
                                        <option v-for="item in availableTca[global.activeField.name].core" :value="item.field">
                                            {{ item.label }} ({{ item.field }})
                                        </option>
                                    </optgroup>
                                    <optgroup v-if="availableTca[global.activeField.name].mask.length" class="c-divider" label="Mask fields">
                                        <option v-for="item in availableTca[global.activeField.name].mask" :value="item.field">
                                            {{ item.label }}
                                        </option>
                                    </optgroup>
                                </select>
                                <f:comment><!-- todo move to defaults configuration--></f:comment>
                                <f:if condition="{form} == 'richtext'">
                                    <input type="hidden" name="tx_mask_tools_maskmask[storage][elements][options][--index--]" value="rte"/>
                                </f:if>
                            </div>
                        </div>
                    </div>
                </div>

                <f:comment><!-- TYPO3 field overwrite label --></f:comment>
                <f:comment><!-- todo show only if existing field --></f:comment>
                <div v-if="isExistingField" class="row tx_mask_fieldcontent_existing">
                    <div class="form-group col-sm-6">
                        <label class="t3js-formengine-label" for="form_overwritelabel">
                            <f:translate key="tx_mask.field.overwritelabel"/>
                        </label>
                        <div class="t3js-formengine-field-item">
                            <div class="form-control-wrap">
                                <input
                                    v-model="global.activeField.label"
                                    class="form-control"
                                    id="form_overwritelabel"
                                    placeholder="{f:translate(key: 'tx_mask.all.label')}"
                                    title="{f:translate(key: 'tx_mask.all.label')}"
                                />
                            </div>
                        </div>
                    </div>
                </div>
                <f:comment><!-- mask field key and label --></f:comment>
                <div v-if="!isExistingField" class="tx_mask_fieldcontent_new">
                    <div class="row">
                        <div class="form-group col-sm-6" v-if="!editMode">
                            <label class="t3js-formengine-label" for="form_key">
                                <f:translate key="tx_mask.field.fieldkey"/>
                            </label>
                            <div class="t3js-formengine-field-item">
                                <div class="form-control-wrap">
                                    <input
                                        v-model="global.activeField.key"
                                        id="form_key"
                                        class="form-control tx_mask_newfieldname lowercase tceforms-textfield"
                                        required="required"
                                        data-error="{f:translate(key: 'tx_mask.all.error.key')}"
                                        placeholder="no blanks, no dashes"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-sm-6">
                            <label class="t3js-formengine-label" for="form_label">
                                <f:translate key="tx_mask.field.label"/>
                            </label>
                            <div class="t3js-formengine-field-item">
                                <div class="form-control-wrap">
                                    <input
                                        v-model="global.activeField.label"
                                        id="form_label"
                                        class="form-control" title="{f:translate(key: 'tx_mask.content.label')}"
                                        placeholder="{f:translate(key: 'tx_mask.placeholder.label')}"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-sm-6">
                            <label class="t3js-formengine-label" for="form_description">
                                <f:translate key="tx_mask.field.description"/>
                            </label>
                            <div class="t3js-formengine-field-item">
                                <div class="form-control-wrap">
                                    <textarea
                                        v-model="global.activeField.description"
                                        id="form_description"
                                        class="form-control"
                                        title="{f:translate(key: 'tx_mask.content.description')}"
                                        placeholder="{f:translate(key: 'tx_mask.placeholder.description')}">
                                    </textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <f:comment><!-- todo here comes the general fields --></f:comment>
                </div>
            </div>
        </div>
        <f:comment>
            <f:if condition="{isInlineField}">
                <f:else>
                    <f:render partial="WizardContent/Warnings" arguments="{storage: storage, editMode: editMode, key: key}"/>
                </f:else>
            </f:if>
        </f:comment>
    </div>
</div>
